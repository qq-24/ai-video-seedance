# Checklist

## 数据库架构

- [x] `materials` 表类型定义正确，包含 id, scene_id, type, storage_path, url, metadata, order_index, created_at 字段
- [x] `video_chains` 表类型定义正确，包含 id, project_id, name, created_at 字段
- [x] `scenes` 表新增 `mode` 字段，支持 'story' 和 'free' 两种模式
- [x] `video_chain_items` 表正确定义视频链项与视频的关联关系

## 素材上传功能

- [x] 素材上传 API 支持音频、视频、图片、文字四种类型
- [x] 文件上传有类型验证和大小限制
- [x] 上传成功后文件存储到 Supabase Storage
- [x] 数据库正确记录素材信息

## 素材管理功能

- [x] 素材可以正确关联到场景
- [x] 素材可以从场景中移除
- [x] 素材删除时同时删除存储文件
- [x] 素材排序功能正常工作

## 素材临时生成

- [x] 临时生成图片功能正常，生成的图片关联到场景
- [x] 临时生成文字描述功能正常
- [x] 自然语言输入能正确识别生成意图
- [x] 意图识别结果能正确路由到对应生成 API

## 首尾帧接续功能

- [x] 能正确提取视频的最后一帧（支持服务端和前端两种方式）
- [x] 提取的帧能作为新视频的首帧输入
- [x] 视频链能正确记录接续关系
- [x] 视频链预览能显示完整拼接效果
- [x] 可以重新生成链中任意片段

## 前端组件

- [x] 项目模式选择器正确显示两种模式选项
- [x] 素材面板正确显示场景关联的所有素材
- [x] 素材卡片显示类型图标和预览
- [x] 素材上传组件支持拖拽上传
- [x] 自然语言输入框有良好的交互体验
- [x] 视频链组件正确显示接续关系
- [x] 接续生成按钮功能正常

## 模式切换

- [x] 故事模式保持原有工作流不变
- [x] 自由模式允许手动创建场景和添加素材
- [x] 两种模式的项目都能正常完成整个流程

## 兼容性

- [x] 现有项目数据不受影响
- [x] 现有 API 保持向后兼容
- [x] 现有前端组件在无新功能时正常工作

## 代码质量

- [x] TypeScript 类型检查通过
- [x] ESLint 检查通过（0 errors）
- [x] 代码风格与项目现有代码一致
